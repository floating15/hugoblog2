<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Matplotlib - 1. Intro | haoming&#39;s blog</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/other/">other</a></li>
      
      <li><a href="/post/">Posts</a></li>
      
    </ul>
    <hr/>
    </nav>




<div class="article-meta">
<h1><span class="title">Matplotlib - 1. Intro</span></h1>

<h2 class="date">2020/03/05</h2>
</div>

<main>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">numpy</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">np</span>
<span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">pandas</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">pd</span>
</code></pre></div><h2 id="1-matplotlib-介绍">1. Matplotlib 介绍</h2>
<h3 id="11-导入matplotlib">1.1 导入Matplotlib</h3>
<p>plt 是 Matplotlib 最常用的接口</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">matplotlib</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">mpl</span>
<span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">matplotlib.pyplot</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">plt</span>
</code></pre></div><h2 id="12-设置绘图样式">1.2 设置绘图样式</h2>
<p>使用 <code>plt.style.use</code> 来选择图形的绘图风格</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">plt<span style="color:#666">.</span>style<span style="color:#666">.</span>use(<span style="color:#ba2121">&#39;classic&#39;</span>)
</code></pre></div><h2 id="13-关于-show-方法">1.3 关于 <code>show()</code> 方法</h2>
<p>Matplotlib 是否使用 <code>show()</code> 方法取决于开发环境，一般而言有三种开发环境：1）script；2）IPython Shell；3）IPython Notebook</p>
<h3 id="131-script">1.3.1 Script</h3>
<p>如果在脚本文件中使用 Matplotlib，显示图形时必须使用 <code>plt.show()</code>。<code>plt.show()</code> 会启动一个 event loop，找到当前所有可用的图形对象，然后打开一个或多个交互式窗口文本。</p>
<p>需要注意，一个 Python session 中只能使用一次 <code>plt.show()</code>，因此通常把它放在脚本最后。</p>
<h3 id="132-ipython-shell">1.3.2 IPython Shell</h3>
<p>在该开发环境下，可以通过 <code>%matplotlib</code> 魔法命令开启 Matplotlib 模式，此后不需要使用 <code>plt.show()</code> 了。开启 Matplotlib 模式后任何 <code>plt</code> 命令都会自动打开一个图形窗口，增加新的命令图形就会更新。有时一些变化不会自动及时更新，此时可以使用 <code>plt.draw()</code> 强制更新。</p>
<h3 id="133-ipython-notebook">1.3.3 IPython Notebook</h3>
<p>IPython Notebook 通过下面两种魔法命令可以使图片直接嵌入在 IPython Notebook 中：</p>
<ul>
<li><code>%matplotlib notebook</code>：在 Notebook 中启动交互式图形</li>
<li><code>%matplotlib inline</code>：在 Notebook 中启动静态图形</li>
</ul>
<p>本文同一使用后者。</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#666">%</span>matplotlib inline
</code></pre></div><div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">x <span style="color:#666">=</span> np<span style="color:#666">.</span>linspace(<span style="color:#666">0</span>, <span style="color:#666">10</span>, <span style="color:#666">100</span>)
fig <span style="color:#666">=</span> plt<span style="color:#666">.</span>figure()
plt<span style="color:#666">.</span>plot(x, np<span style="color:#666">.</span>sin(x), <span style="color:#ba2121">&#39;-&#39;</span>)
plt<span style="color:#666">.</span>plot(x, np<span style="color:#666">.</span>cos(x), <span style="color:#ba2121">&#39;--&#39;</span>)
</code></pre></div><pre><code>[&lt;matplotlib.lines.Line2D at 0x7f801914f7f0&gt;]
</code></pre>
<p><img src="../../../../img_mpl/MPL01/output_7_1.png" alt="png"></p>
<h2 id="14-将图形保存为文件">1.4 将图形保存为文件</h2>
<p>使用 <code>savefig()</code> 命令将图形保存为文件，在 <code>savefig()</code> 中保存的图片文件格式就是文件的扩展名。可以通过 <code>canvas</code> 对象的方法查看系统支持的文件格式</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig<span style="color:#666">.</span>canvas<span style="color:#666">.</span>get_supported_filetypes()
</code></pre></div><pre><code>{'eps': 'Encapsulated Postscript',
 'jpg': 'Joint Photographic Experts Group',
 'jpeg': 'Joint Photographic Experts Group',
 'pdf': 'Portable Document Format',
 'pgf': 'PGF code for LaTeX',
 'png': 'Portable Network Graphics',
 'ps': 'Postscript',
 'raw': 'Raw RGBA bitmap',
 'rgba': 'Raw RGBA bitmap',
 'svg': 'Scalable Vector Graphics',
 'svgz': 'Scalable Vector Graphics',
 'tif': 'Tagged Image File Format',
 'tiff': 'Tagged Image File Format'}
</code></pre>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig<span style="color:#666">.</span>savefig(<span style="color:#ba2121">&#39;fig.png&#39;</span>)
<span style="">!</span>ls <span style="color:#666">-</span>lh
</code></pre></div><pre><code>total 64
-rw-r--r--  1 wanghaoming  staff   913B Mar  7 17:23 MPL01.ipynb
-rw-r--r--  1 wanghaoming  staff    26K Mar  7 18:16 fig.png
</code></pre>
<p>IPython 的 Image 对象可以显示文件内容：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">from</span> <span style="color:#00f;font-weight:bold">IPython.display</span> <span style="color:#008000;font-weight:bold">import</span> Image
Image(<span style="color:#ba2121">&#39;fig.png&#39;</span>)
</code></pre></div><p><img src="../../../../img_mpl/MPL01/output_12_0.png" alt="png"></p>
<h1 id="2-画图接口">2. 画图接口</h1>
<p>Matplotlib 有两种画图接口：1）MATLAB 风格接口；2）面向对象接口。</p>
<h2 id="21-matlab-风格接口">2.1 Matlab 风格接口</h2>
<p>Matlab 风格的工具位于 pyplot（plt）接口中。这种接口的特性是有状态性：它会持续跟踪当前的图形和坐标轴，所有的 <code>plt</code> 命令都可以应用。</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">plt<span style="color:#666">.</span>figure() <span style="color:#408080;font-style:italic">#  1. 创建图形</span>

plt<span style="color:#666">.</span>subplot(<span style="color:#666">2</span>, <span style="color:#666">1</span>, <span style="color:#666">1</span>)  <span style="color:#408080;font-style:italic"># 2. 设置子图的行、列、编号</span>
plt<span style="color:#666">.</span>plot(x, np<span style="color:#666">.</span>sin(x))

plt<span style="color:#666">.</span>subplot(<span style="color:#666">2</span>, <span style="color:#666">1</span>, <span style="color:#666">2</span>)
plt<span style="color:#666">.</span>plot(x, np<span style="color:#666">.</span>cos(x))
</code></pre></div><pre><code>[&lt;matplotlib.lines.Line2D at 0x7f8058fb7bb0&gt;]
</code></pre>
<p><img src="../../../../img_mpl/MPL01/output_14_1.png" alt="png"></p>
<h2 id="22-面向对象接口">2.2 面向对象接口</h2>
<p>在面相对象接口中，画图函数不受当前活动图形或坐标轴的限制，而变成显示的 fig，ax 方法。</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig, ax <span style="color:#666">=</span> plt<span style="color:#666">.</span>subplots(<span style="color:#666">2</span>) <span style="color:#408080;font-style:italic"># 创建图形和 Axes 对象</span>
<span style="color:#408080;font-style:italic"># print(ax)</span>
<span style="color:#408080;font-style:italic"># print(fig)</span>
ax[<span style="color:#666">0</span>]<span style="color:#666">.</span>plot(x, np<span style="color:#666">.</span>sin(x))
ax[<span style="color:#666">1</span>]<span style="color:#666">.</span>plot(x, np<span style="color:#666">.</span>cos(x));
</code></pre></div><p><img src="../../../../img_mpl/MPL01/output_16_0.png" alt="png"></p>

</main>

  <footer>
  <script defer src="//yihui.org/js/math-code.js"></script>
<script defer src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script defer src="//yihui.org/js/center-img.js"></script>

  
  <hr/>
  © <a href="https://yihui.org">Yihui Xie</a> 2017 &ndash; 2022 | <a href="https://www.baidu.com">Github</a> | <a href="https://www.zhihu.com">Twitter</a>
  
  </footer>
  </body>
</html>





